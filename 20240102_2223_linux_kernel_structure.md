# 리눅스 커널 소스의 구조

* arch: 아키텍처별로 동작하는 커널 코드
  + arm, arm64, x86
  ? 아키텍처란 컴퓨터 시스템의 구조와 설계를 나타내며 하드웨어와 소프트웨어 간의 상호 작용이 이루어짐

* include: 커널 코드 빌드에 필요한 헤더 파일

* kernel: 커널의 핵심 코드가 있는 디텍토리
  + irq, sched, power, locking, printk, trace

* mm: Memory managemnet로 가상 메모리 및 페이징 관련 코드

* drivers: 모든 시스템의 드라이버 코드가 있음

* fs: 모든 파일 시스템 코드가 담긴 폴더

* lib: 커널에서 제공하는 라이브러리 코드

# objdump 바이너리 유틸리티 (오브젝트 포맷의 파일을 조작할 수 있는 프로그램)

* objdump, as, ld, addr2line, nm, readelf
  + objdump: 라이브러리나 ELF(Executable and Linkable Format) 형식의 파일을 어셈블리어로 출력
  + as: 어셈블러
    - 어셈블리 언어 코드를 기계어 코드로 변환하는 역할
    - ex) as -o output.o input.s 
    	-> input.s 파일의 어셈블리 코드를 output.o 목적 파일로 어셈블
  + ld: 링커
    - 여러 목적 파일 및 라이브러리 결합하여 최종 실행 파일을 생성
    - 파일 간의 상호 의존성 해결 및 필요한 라이브러리를 찾아 링크하는 역할
    - ex) ld -o output input1.o input2.o -lc
	-> input1.o 및 input2.o 목적 파일들을 output 실행 파일로 링크하며 -lc는 C 라이브러리 추가
  + addr2line: 주소를 파일과 라인으로 출력
  + nm: 오브젝트 파일의 심벌을 출력
  + readelf: ELF 파일의 내용을 출력

# 컴파일 과정 순서

* 전처리 -> 컴파일 -> 어셈블리 -> 링크
  + 전처리: 소스 코드 파일을 읽어 들여 전치리기(Preprocessor)에 의해 처리됨. 전처리기는 주석 제거, 매크로 치환, 파일 포함 등과 같은 작업 수행
  + 컴파일: 전처리가 완료된 소스 코드가 컴파일러에 의해 컴파일되어 어셈블리 코드 또는 중간 언어로 변환
  + 어셈블리: 어셈블러에 의해 기계어 코드로 변환, CPU가 직접 실행할 수 있는 낮은 수준의 언어로 작성된 것이며 각 어셈블리 명령은 대부분 하드웨어의 명령에 직접 대응
  + 링크: 컴파일 된 파일들과 필요한 라이브러리들이 링커에 의해 결합되어 최종 실행 파일 생성


